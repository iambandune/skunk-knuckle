<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>journals. - Intake</title>
  <!-- Open Graph for rich link previews -->
  <meta property="og:title" content="journals. — intake" />
  <meta property="og:description" content="we finish records. we focus on the emotion, shape everything around it, and keep the parts that feel most like you." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/intake.html" />
  <meta property="og:image" content="/og-card.png?v=8" />
  <meta property="og:image:width" content="2400" />
  <meta property="og:image:height" content="2400" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="journals. — intake" />
  <meta name="twitter:description" content="we finish records. we focus on the emotion, shape everything around it, and keep the parts that feel most like you." />
  <meta name="twitter:image" content="/og-card.png?v=8" />
  <!-- Meta Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '2076925979518264');
  fbq('track', 'PageView');
  fbq('track', 'Lead');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=2076925979518264&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    /* Render all UI text in lowercase */
    html, body { text-transform: lowercase; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Helvetica Neue', sans-serif;
      min-height: 100vh;
      background: linear-gradient(180deg,
        #4A90E2 0%,
        #6CAFE3 25%,
        #89C4E8 40%,
        #F4B674 55%,
        #FF9F5C 70%,
        #FF7A42 85%,
        #FF6B35 100%);
      position: relative; overflow-x: hidden;
    }

  .container { max-width: 840px; margin: 0 auto; padding: 66px 20px 60px; position: relative; z-index: 10; }
  /* Pixelated clouds */
  .cloud { position: absolute; background: rgba(255, 255, 255, 0.3); border-radius: 100px; opacity: 0.4; filter: contrast(150%) brightness(120%); }
  .cloud::before { content: ''; position: absolute; background: rgba(255, 255, 255, 0.3); border-radius: 100px; }
  .cloud1 { width: 120px; height: 40px; top: 20%; animation: drift 45s infinite; }
  .cloud1::before { width: 60px; height: 50px; top: -25px; left: 20px; }
  .cloud2 { width: 80px; height: 35px; top: 40%; animation: drift 60s infinite; animation-delay: -20s; }
  .cloud2::before { width: 50px; height: 40px; top: -20px; right: 15px; }
  .cloud3 { width: 100px; height: 30px; top: 60%; animation: drift 50s infinite; animation-delay: -35s; }
  .cloud3::before { width: 45px; height: 35px; top: -15px; left: 30px; }
  .cloud4 { width: 140px; height: 45px; top: 75%; animation: drift 55s infinite; animation-delay: -10s; }
  .cloud4::before { width: 70px; height: 55px; top: -28px; right: 25px; }
  @keyframes drift { 0% { left: -200px; } 100% { left: 100%; } }

    h1 {
      font-size: 64px; font-weight: 400; text-align: center; color: #fff; margin-bottom: 16px; letter-spacing: -2px;
      text-shadow: 0 2px 20px rgba(0,0,0,0.1);
    }
    .intro { color: rgba(255,255,255,0.9); text-align: center; font-size: 18px; line-height: 1.6; margin: 8px auto 24px; max-width: 680px; }

    /* Menu button (same as other pages) */
  .top-left-controls { position: fixed; top: 18px; left: 18px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; }
  .menu-button { cursor: pointer; padding: 14px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 28px; transition: all 0.3s ease; }
  .back-icon { display: inline-flex; align-items: center; justify-content: center; padding: 14px; color: rgba(255,255,255,0.85); background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.22); border-radius: 28px; backdrop-filter: blur(10px); text-decoration: none; transition: all 0.2s ease; }
  .back-icon:hover { background: rgba(255,255,255,0.14); transform: translateY(-1px); }
  .back-icon svg { width: 20px; height: 20px; stroke: currentColor; }
    .menu-icon { display: flex; flex-direction: column; gap: 4px; width: 20px; }
    .menu-icon span { display: block; width: 100%; height: 2px; background-color: #fff; transition: all 0.3s ease; }
    .menu-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 999; display: none; opacity: 0; transition: opacity 0.3s ease; }
    .menu-overlay.active { display:flex; opacity: 1; }
    .menu-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
    .menu-content a { display:block; color:#fff; text-decoration:none; font-size:24px; margin: 20px 0; opacity:0.8; transition:all 0.3s ease; }
    .menu-content a:hover { opacity:1; transform: scale(1.1); }

    .form-card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.22); border-radius: 16px; backdrop-filter: blur(12px); padding: 22px 22px 20px; color: #fff; }

    

  .field { margin-bottom: 14px; }
    label { display: block; margin-bottom: 8px; font-weight: 600; color: rgba(255,255,255,0.95); }
  .hint { display:block; font-size: 12px; color: rgba(255,255,255,0.78); margin-top: 6px; }

    input[type="text"], input[type="email"], input[type="tel"], textarea, select {
      width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.38); background: rgba(0,0,0,0.32); color: rgba(255,255,255,0.98);
    }
  input::placeholder, textarea::placeholder { color: rgba(255,255,255,0.86); text-transform: lowercase; }
    textarea { min-height: 100px; resize: vertical; }

    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

  .actions { display:flex; flex-wrap: wrap; gap: 12px; align-items: center; margin-top: 6px; }
    .btn {
      color: #fff; background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.22);
      padding: 12px 22px; border-radius: 999px; font-size: 16px; font-weight: 600; letter-spacing: 0.4px; backdrop-filter: blur(10px);
      cursor: pointer; transition: all 0.25s ease; font-family: inherit;
    }
    .btn:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }

    .required { color: #ffd9d9; font-size: 12px; margin-left: 6px; }

  /* Pricing modal */
  body.modal-open { overflow: hidden; }
  .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.55); backdrop-filter: blur(8px); display: none; align-items: center; justify-content: center; z-index: 2000; }
  .modal-overlay.active { display: flex; }
  .modal { width: min(92vw, 860px); max-height: 86vh; background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.22); border-radius: 16px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.35); color: #fff; }
  .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; background: rgba(255,255,255,0.08); border-bottom: 1px solid rgba(255,255,255,0.18); }
  .modal-title { font-size: 16px; font-weight: 600; color: rgba(255,255,255,0.95); }
  .modal-close { appearance: none; border: 1px solid rgba(255,255,255,0.25); background: rgba(255,255,255,0.12); color: #fff; width: 32px; height: 32px; border-radius: 999px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; transition: all 0.2s ease; }
  .modal-close:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }
    .modal-body { width: 100%; max-height: 82vh; overflow: hidden; }
    @media (max-width: 640px) {
      .modal { width: 96vw; }
      .modal-body { max-height: 88vh; }
    }
  .modal-body iframe { width: 100%; border: 0; background: transparent; display: block; }

    @media (max-width: 640px) {
      h1 { font-size: 42px; margin-bottom: 10px; }
      .row { grid-template-columns: 1fr; }
      .container { padding: 60px 16px; }
    }
  </style>
</head>
<body>
  <!-- Animated pixelated clouds -->
  <div class="cloud cloud1"></div>
  <div class="cloud cloud2"></div>
  <div class="cloud cloud3"></div>
  <div class="cloud cloud4"></div>
  <div class="top-left-controls">
    <div class="menu-button">
      <div class="menu-icon">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <a href="/" class="back-icon" aria-label="back to mixing/mastering" title="back">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M15 6l-6 6 6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
  <div class="menu-overlay">
    <nav class="menu-content">
      <a href="coming_soon.html">samples (coming soon)</a>
      <a href="/">mixing/mastering</a>
    </nav>
  </div>

  <div class="container">
    <h1>intake</h1>
    
    <p class="intro">
      we finish records. we focus on the emotion, shape everything around it, and keep the parts that feel most like you.
    </p>

    <div class="form-card">
      <!-- Success Message (hidden by default) -->
      <div id="successMessage" style="display: none; text-align: center; padding: 60px 20px;">
        <h2 style="font-size: 48px; font-weight: 400; color: #fff; margin-bottom: 16px;">thank you!</h2>
        <p style="color: rgba(255,255,255,0.85); font-size: 18px;">we got your submission and will reach out shortly.</p>
      </div>

      <form id="intakeForm">
        <div class="row">
          <div class="field">
            <label for="name">Name <span class="required">(required)</span></label>
            <input type="text" id="name" name="name" placeholder="your name" required />
          </div>
          <div class="field">
            <label for="email">Email <span class="required">(required)</span></label>
            <input type="email" id="email" name="email" placeholder="you@example.com" required />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone" placeholder="optional" />
            <span class="hint">Optional, if you prefer text updates</span>
          </div>
          <div class="field">
            <label for="service">Service <span class="required">(required)</span></label>
            <select id="service" name="service" required>
              <option value="">select one</option>
              <option value="stem-master">stem master</option>
              <option value="mix-and-master">mix + master</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label for="link">Streaming link to your track <span class="required">(required)</span></label>
          <input type="text" id="link" name="link" placeholder="spotify, soundcloud, google drive, dropbox, etc." required />
          <span class="hint">Success tips: private SoundCloud or unlisted Drive/Dropbox link works great. If sending files later, 24-bit WAV preferred.</span>
        </div>

        

        <div class="field">
          <label for="notes">Anything we should know?</label>
          <textarea id="notes" name="notes" placeholder="what’s the vision? any references? what’s feeling stuck?"></textarea>
        </div>

        

        <div class="actions">
          <button type="submit" class="btn" id="submitBtn">send intake</button>
          <button type="button" class="btn" id="pricingBtn" aria-haspopup="dialog" aria-controls="pricingModal">pricing</button>
          <div class="hint" id="statusHint">we'll send this straight to journals.sound@gmail.com</div>
        </div>
      </form>
    </div>
  </div>

  <!-- Pricing modal -->
  <div class="modal-overlay" id="pricingModal" role="dialog" aria-modal="true" aria-labelledby="pricingTitle">
    <div class="modal" role="document">
      <div class="modal-header">
        <div class="modal-title" id="pricingTitle">pricing</div>
        <button class="modal-close" id="pricingClose" aria-label="close">×</button>
      </div>
      <div class="modal-body">
        <iframe id="pricingFrame" title="pricing sheet" data-src="pricing_sheet.html"></iframe>
      </div>
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // Menu overlay
    document.addEventListener('DOMContentLoaded', function() {
      const menuButton = document.querySelector('.menu-button');
      const menuOverlay = document.querySelector('.menu-overlay');
      const menuIcon = document.querySelector('.menu-icon');

      menuButton.addEventListener('click', function() {
        menuOverlay.classList.toggle('active');
        menuIcon.classList.toggle('active');
      });

      menuOverlay.addEventListener('click', function(e) {
        if (e.target === menuOverlay) {
          menuOverlay.classList.remove('active');
          menuIcon.classList.remove('active');
        }
      });

      // Intake form: POST to server-side email API
      const form = document.getElementById('intakeForm');
      const submitBtn = document.getElementById('submitBtn');
      const statusHint = document.getElementById('statusHint');
  const pricingBtn = document.getElementById('pricingBtn');
  const pricingModal = document.getElementById('pricingModal');
  const pricingClose = document.getElementById('pricingClose');
  const pricingFrame = document.getElementById('pricingFrame');
      
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        const name = (document.getElementById('name').value || '').trim();
        const email = (document.getElementById('email').value || '').trim().toLowerCase();
        const phone = (document.getElementById('phone').value || '').trim();
        const service = (document.getElementById('service').value || '').trim();
        let link = (document.getElementById('link').value || '').trim();
        const notes = (document.getElementById('notes').value || '').trim();

        // Required fields check
        if (!name || !email || !service || !link) {
          statusHint.textContent = 'please fill in all required fields.';
          statusHint.style.color = '#ffd9d9';
          return;
        }

        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          statusHint.textContent = 'please enter a valid email address.';
          statusHint.style.color = '#ffd9d9';
          return;
        }

        // Check for common email typos
        const typoPatterns = [/\.con$/i, /\.cmo$/i, /@gmial\./i, /@gamil\./i, /@gmai\./i];
        if (typoPatterns.some(p => p.test(email))) {
          statusHint.textContent = 'double-check your email — looks like there might be a typo.';
          statusHint.style.color = '#ffd9d9';
          return;
        }

        // URL validation - prepend https:// if missing
        if (!/^https?:\/\//i.test(link)) {
          link = 'https://' + link;
        }
        try {
          new URL(link);
        } catch {
          statusHint.textContent = 'please enter a valid URL for your streaming link.';
          statusHint.style.color = '#ffd9d9';
          return;
        }

        // Reset status styling
        statusHint.style.color = '';
        submitBtn.disabled = true;
        statusHint.textContent = 'sending…';

        try {
          const res = await fetch('/api/intake', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, phone, service, link, notes })
          });
          
          const data = await res.json().catch(() => ({}));
          
          if (!res.ok) {
            throw new Error(data.error || 'something went wrong. please try again.');
          }
          
          // Success! Hide form and show thank you message
          form.style.display = 'none';
          document.getElementById('successMessage').style.display = 'block';
        } catch (err) {
          console.error(err);
          statusHint.textContent = err.message || 'something went wrong. please try again.';
          statusHint.style.color = '#ffd9d9';
        } finally {
          submitBtn.disabled = false;
        }
      });

      // Pricing modal open/close
      function openPricing() {
        pricingModal.classList.add('active');
        document.body.classList.add('modal-open');
        if (pricingFrame && !pricingFrame.src) {
          const url = pricingFrame.getAttribute('data-src');
          if (url) pricingFrame.src = url;
        }
        // Size on next frame in case it's already loaded
        requestAnimationFrame(sizePricingFrame);
      }
      function closePricing() {
        pricingModal.classList.remove('active');
        document.body.classList.remove('modal-open');
      }
      function sizePricingFrame() {
        try {
          if (!pricingFrame || !pricingFrame.contentWindow) return;
          const doc = pricingFrame.contentDocument || pricingFrame.contentWindow.document;
          if (!doc || !doc.body) return;
          const contentHeight = doc.documentElement.scrollHeight || doc.body.scrollHeight || 0;
          if (contentHeight > 0) {
            const maxH = Math.round((window.innerHeight || 800) * (window.matchMedia('(max-width: 640px)').matches ? 0.88 : 0.82));
            pricingFrame.style.height = Math.min(contentHeight, maxH) + 'px';
          }
        } catch (e) { /* cross-origin guard */ }
      }
      pricingBtn.addEventListener('click', openPricing);
      pricingClose.addEventListener('click', closePricing);
      pricingModal.addEventListener('click', (e) => { if (e.target === pricingModal) closePricing(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && pricingModal.classList.contains('active')) closePricing(); });
      pricingFrame.addEventListener('load', () => {
        sizePricingFrame();
        setTimeout(sizePricingFrame, 120); // adjust after fonts/layout settle
      });
      window.addEventListener('resize', () => { if (pricingModal.classList.contains('active')) sizePricingFrame(); });
    });
  </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"c32b86bb49ea48c1a853b20556c6e44e","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
